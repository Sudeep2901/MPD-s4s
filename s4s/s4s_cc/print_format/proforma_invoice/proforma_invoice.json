{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2023-06-28 17:30:05.041949",
 "css": ".tab{\n    border: 1px solid black;\n    border-collapse: collapse;\n}",
 "custom_format": 1,
 "default_print_language": "en-GB",
 "disabled": 0,
 "doc_type": "Proforma Invoice",
 "docstatus": 0,
 "doctype": "Print Format",
 "font": "Default",
 "html": "<h3 align='center'><b>{{doc.company}}</b></h3>\n{% set add = frappe.get_doc(\"Address\",{\"name\":doc.company_address})%}\n<p align='center'>{{add.address_line1}}, {{add.city}}, {{add.state}}-{{add.gst_state_number}}, Pincode-{{add.pincode}}, {{add.country}}</p>\n<br>\n<div>\n<p align='center' style=\"font-size:16px\"><b>Proforma Invoice</b></p>\n<hr>\n<table >\n<tr >\n<td style=\"width:50%\">\n<table>\n<tr>\n<td style=\"font-size:12px\"><b>Customer Name</b></td>\n<td>:</td>\n<td style=\"font-size:12px\"><b>{{doc.customer_name}}</b></td>\n</tr>\n<tr>\n<td style=\"font-size:12px\"><b>Address</b></td>\n<td>:</td>\n<td style=\"font-size:12px\">{{doc.address_display}}</td>\n</tr>\n</table>\n</td>\n\n<td style=\"width:50%\">\n<table style=\"font-size:12px\">\n<tr>\n<td style=\"width:35%\"><b>Proforma Invoice</b></td>\n<td>:</td>\n<td><b>{{doc.name}}</b></td>\n</tr>\n<tr>\n<td style=\"width:35%\"><b>Date</b></td>\n<td>:</td>\n<td>{{doc.posting_date}}</td>\n</tr>\n\n<tr>\n<td style=\"width:35%\"><b>Customer's Purchase Order</b></td>\n<td>:</td>\n                        {% if doc.po_no == None %}\n<td></td>\n                        {% else%}\n<td>{{doc.po_no}}</td>\n                        {% endif %}\n</tr>\n<tr>\n<td style=\"width:35%\"><b>Customer's Purchase Order Date</b></td>\n<td>:</td>\n                        {% if doc.po_date == None %}\n<td></td>\n                        {% else %}\n<td>{{doc.po_date}}</td>\n                        {% endif %}\n</tr>\n</table>\n\n \n\n            </td>\n</tr>\n</table>\n\n<br>\n\n\n    {% set rate_map = {} %}\n    {% for item in doc.items %}\n        {% set rate = item.rate | float %}\n        {% set qty = item.qty %}\n        {% set amount = rate * qty | float %}\n        {% if rate not in rate_map %}\n            {% set _ = rate_map.update({rate: {}}) %}\n        {% endif %}\n        {% if item.item_code not in rate_map[rate] %}\n            {% set _ = rate_map[rate].update({item.item_code: {'item_name': item.item_name, 'uom': item.uom, 'hsn': item.hsn, 'qty': qty, 'amount': amount, 'sr': loop.index}}) %}\n        {% else %}\n            {% set _ = rate_map[rate].update({item.item_code: {'item_name': rate_map[rate][item.item_code].item_name, 'uom': rate_map[rate][item.item_code].uom, 'hsn': rate_map[rate][item.item_code].hsn, 'qty': rate_map[rate][item.item_code].qty + qty, 'amount': rate_map[rate][item.item_code].amount + amount, 'sr': rate_map[rate][item.item_code].sr}}) %}\n        {% endif %}\n    {% endfor %}\n    {% set final_data = [] %}\n    {% for rate, items in rate_map.items() %}\n        {% for item_code, item_info in items.items() %}\n                {% set hsn = frappe.get_doc(\"Item\",{'name':item_code}) %}\n                {% if hsn.gst_hsn_code == None %}\n                                {% set data = {\n                \"item_code\":item_code,\n                \"item_name\": item_info.item_name,\n                \"hsn\": hsn.gst_hsn_code,\n                \"qty\":item_info.qty ,\n                \"uom\":item_info.uom,\n                \"rate\": rate,\n                \"amount\":\"%.2f\"|format(item_info.amount)\n            } %}\n                {% else %}\n                                {% set data = {\n                \"item_code\":item_code,\n                \"item_name\": item_info.item_name,\n                \"hsn\": hsn.gst_hsn_code,\n                \"qty\":item_info.qty ,\n                \"uom\":item_info.uom,\n                \"rate\": rate,\n                \"amount\":\"%.2f\"|format(item_info.amount)\n            } %}\n                {% endif %}\n\n \n\n            {% set _ = final_data.append(data) %}\n        {% endfor %}\n    {% endfor %}\n\n \n\n    <table class=\"tab\" style=\"width:100%;font-size:12px\">\n<tr class=\"tab\"> \n<td class=\"tab\"><b>Sr. No.</b></td>\n<td class=\"tab\"><b>Item Code</b></td>\n<td class=\"tab\"><b>Item Name</b></td>\n<td class=\"tab\"><b>HSN Code</b></td>\n<td class=\"tab\"><b>Quantity</b></td>\n<td class=\"tab\"><b>UOM</b></td>\n<td class=\"tab\"><b>Rate</b></td>\n<td class=\"tab\"><b>Amount</b></td>\n</tr>\n    {% for i in final_data %}\n<tr>\n<td class=\"tab\">{{loop.index}}</td>\n<td class=\"tab\">{{i.item_code}}</td>\n<td class=\"tab\">{{i.item_name}}</td>\n<td class=\"tab\">{{i.hsn}}</td>\n<td class=\"tab\">{{i.qty}}</td>\n<td class=\"tab\">{{i.uom}}</td>\n<td class=\"tab\">{{i.rate}}</td>\n<td class=\"tab\">{{i.amount}}</td>\n</tr>\n    {% endfor %}\n</table>\n\n \n\n\n\n</div>\n<br>\n<div>\n<table align=\"right\" style=\"font-size:13px\">\n<tr>\n<td><b>Total</b></td>\n<td>:</td>\n<td>\u20b9 {{doc.total | float}}</td>\n</tr>\n<tr>\n<td><b>Grand Total</b></td>\n<td>:</td>\n<td>\u20b9 {{doc.grand_total | float }}</td>\n</tr>\n</table>\n</div>\n\n \n\n ",
 "idx": 0,
 "line_breaks": 0,
 "modified": "2023-06-30 17:36:18.999918",
 "modified_by": "vaibhav.solanke@mannlowe.com",
 "module": "S4S CC",
 "name": "Proforma Invoice",
 "owner": "Administrator",
 "print_format_builder": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}